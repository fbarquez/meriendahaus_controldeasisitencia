{% extends 'clock/base.html' %}

{% block title %}Login{% endblock %}

{% block content %}
<div style="padding-top: 60px;">
    <div class="text-center mb-2">
        <p class="text-muted" style="font-size: 1.1em;">Time Clock</p>
    </div>

    <div class="card">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-error">{{ message }}</div>
            {% endfor %}
        {% endif %}

        <form method="post">
            {% csrf_token %}

            <div class="form-group">
                <label for="username">Username</label>
                <input
                    type="text"
                    id="username"
                    name="username"
                    class="form-control"
                    placeholder="Your username"
                    autocomplete="username"
                    autocapitalize="none"
                    required
                    autofocus
                >
            </div>

            <div class="form-group">
                <label for="password">PIN</label>
                <div style="position: relative;">
                    <input
                        type="password"
                        id="password"
                        name="password"
                        class="form-control"
                        placeholder="••••"
                        autocomplete="current-password"
                        inputmode="numeric"
                        pattern="[0-9]*"
                        maxlength="4"
                        required
                        style="text-align: center; font-size: 1.5em; letter-spacing: 0.5em; padding-right: 50px;"
                    >
                    <button
                        type="button"
                        onclick="togglePassword()"
                        style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; padding: 5px; color: #7f8c8d;"
                    >
                        <svg id="eye-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                    </button>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">
                Login
            </button>
        </form>
    </div>

    <p class="text-center text-muted" style="font-size: 0.85em;">
        Forgot your PIN? Contact the administrator.
    </p>
</div>

<script>
function togglePassword() {
    const input = document.getElementById('password');
    const icon = document.getElementById('eye-icon');

    if (input.type === 'password') {
        input.type = 'text';
        // Eye with slash (hidden)
        icon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>';
    } else {
        input.type = 'password';
        // Eye open (visible)
        icon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>';
    }
}
</script>
{% endblock %}
